# P86: System Validation

## 1. Objective

- **What**: End-to-end tests and performance validation for the complete system
- **Why**: P85 wires components together; this phase proves they work as a product
- **Scope**:
  - Included: E2E user journeys, performance benchmarks, load testing
  - Excluded: New features, UI polish, documentation

## 2. Implementation Tasks

- [ ] Admin journey E2E test (2 files, ~120 LOC)
  - Tests: tests/e2e/test_admin_journey.py
  - Files: tests/e2e/conftest.py
  - Flow: login → import QA → edit prompt → verify chatbot response
  - Depends on: P85 complete

- [ ] User journey E2E test (1 file, ~100 LOC)
  - Tests: tests/e2e/test_user_journey.py
  - Files: (uses conftest from P86.1)
  - Flow: open widget → ask question → get answer → continue conversation
  - Depends on: P86.1

- [ ] Messenger journey E2E test (1 file, ~80 LOC)
  - Tests: tests/e2e/test_messenger_journey.py
  - Files: (uses conftest from P86.1)
  - Flow: webhook receives message → chatbot responds → Messenger API called
  - Depends on: P86.1

- [ ] Error journey E2E test (1 file, ~60 LOC)
  - Tests: tests/e2e/test_error_journeys.py
  - Files: (uses conftest from P86.1)
  - Flow: LLM timeout → fallback response, invalid input → validation error
  - Depends on: P86.1

- [ ] Performance benchmark suite (2 files, ~100 LOC)
  - Tests: tests/performance/test_benchmarks.py
  - Files: tests/performance/conftest.py
  - Measure: response time p50/p95/p99, throughput
  - Depends on: P85 complete

- [ ] Load test script (2 files, ~80 LOC)
  - Tests: tests/performance/test_load.py
  - Files: tests/performance/locustfile.py
  - Simulate: 50 concurrent users, 5 minute duration
  - Depends on: P86.5

- [ ] Resource monitoring (1 file, ~40 LOC)
  - Tests: tests/performance/test_resource_usage.py
  - Files: (uses conftest from P86.5)
  - Track: memory, CPU, DB connections during load
  - Depends on: P86.6

## 3. Success Criteria

- [ ] Admin journey completes successfully end-to-end
- [ ] User journey completes successfully end-to-end
- [ ] Messenger webhook flow works with mocked Meta API
- [ ] Error scenarios handled gracefully (no 500s for known errors)
- [ ] Response time < 2 seconds at p95
- [ ] System handles 50 concurrent users without errors
- [ ] No memory leaks under 5-minute sustained load
- [ ] Database connection pool not exhausted under load
