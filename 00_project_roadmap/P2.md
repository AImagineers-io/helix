# P2: Prompt Admin UI

## Source Reference

**PALAI Path**: `/mnt/d/codes/palai/`

Key files to reference (patterns):
- `frontend/src/pages/QAPairs.tsx` - List page pattern
- `frontend/src/pages/DevSettings.tsx` - Settings editor pattern
- `frontend/src/components/EditHistory.tsx` - Version history pattern
- `frontend/src/services/api.ts` - API client pattern

New pages to create in `frontend/src/pages/prompts/`:
- `PromptList.tsx` - List all prompt templates
- `PromptEditor.tsx` - Edit single prompt with version history

---

## 1. Objective

- **What**: Admin dashboard page for managing prompt templates with editor, version history, and publish workflow.
- **Why**: Enables non-technical staff to edit prompts without developer intervention or code deploys.
- **Scope**:
  - **Included**: Prompt list page, prompt editor, version history panel, publish/rollback buttons, preview mode
  - **Excluded**: A/B testing UI, syntax highlighting, real-time collaboration

---

## 2. Implementation Tasks

- [ ] Create prompts API client (1 file, ~60 LOC)
  - Tests: tests/services/prompts-api.test.ts
  - Files: src/services/prompts-api.ts
  - PALAI ref: Pattern from `frontend/src/services/api.ts`
  - Depends on: P1

- [ ] Create PromptList page component (2 files, ~120 LOC)
  - Tests: tests/pages/PromptList.test.tsx
  - Files: src/pages/prompts/PromptList.tsx, src/pages/prompts/index.tsx
  - PALAI ref: Pattern from `frontend/src/pages/QAPairs.tsx`
  - Depends on: P2.1

- [ ] Create PromptEditor page component (1 file, ~150 LOC)
  - Tests: tests/pages/PromptEditor.test.tsx
  - Files: src/pages/prompts/PromptEditor.tsx
  - PALAI ref: Pattern from `frontend/src/pages/DevSettings.tsx`
  - Depends on: P2.1

- [ ] Add version history sidebar component (2 files, ~100 LOC)
  - Tests: tests/components/VersionHistory.test.tsx
  - Files: src/components/prompts/VersionHistory.tsx, src/components/prompts/VersionItem.tsx
  - PALAI ref: Pattern from `frontend/src/components/EditHistory.tsx`
  - Depends on: P2.3

- [ ] Implement publish/rollback action buttons (1 file, ~60 LOC)
  - Tests: tests/components/PromptActions.test.tsx
  - Files: src/components/prompts/PromptActions.tsx
  - Depends on: P2.3

- [ ] Add preview mode with sample input (2 files, ~100 LOC)
  - Tests: tests/components/PromptPreview.test.tsx
  - Files: src/components/prompts/PromptPreview.tsx, src/services/prompts-api.ts (extend)
  - Depends on: P2.3

- [ ] Add navigation link to sidebar (1 file, ~20 LOC)
  - Tests: tests/components/Sidebar.test.tsx
  - Files: src/components/layout/Sidebar.tsx
  - PALAI ref: `frontend/src/App.tsx` - route definitions
  - Depends on: P2.2

---

## 3. Success Criteria

- [ ] Admin can navigate to /prompts from sidebar
- [ ] Prompt list shows all templates with name, description, active version
- [ ] Clicking a prompt opens the editor page
- [ ] Editor shows current content in textarea
- [ ] Saving creates new version (visible in sidebar history)
- [ ] Version history shows all versions with timestamps
- [ ] Clicking a version loads that content (but doesn't activate)
- [ ] Publish button activates selected version
- [ ] Rollback button reverts to previous active version
- [ ] Preview mode shows sample LLM output
- [ ] All components have passing unit tests
