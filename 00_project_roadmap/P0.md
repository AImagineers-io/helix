# P0: White-label Configuration Foundation

## Source Reference

**PALAI Path**: `/mnt/d/codes/palai/`

Key files to modify:
- `backend/core/config.py` - Centralize all configurable values
- `backend/api/main.py` - Use config for app name/description
- `.env.example` - Document all configuration options

---

## 1. Objective

- **What**: Make all client-specific values configurable via environment variables so the codebase can be forked and configured per client.
- **Why**: Each client gets their own dedicated deployment. Configuration (not code changes) should be all that's needed to customize a new instance.
- **Scope**:
  - **Included**: Environment-based config, branding config, feature flags, configurable responses
  - **Excluded**: Multi-tenant architecture, tenant_id columns, shared databases

---

## 2. Implementation Tasks

- [ ] Create centralized config module (1 file, ~100 LOC)
  - Tests: tests/unit/test_config.py
  - Files: core/config.py (new or extend existing)
  - PALAI ref: Consolidate scattered config from various files
  - Depends on: None

- [ ] Add branding configuration (1 file, ~40 LOC)
  - Tests: tests/unit/test_branding_config.py
  - Files: core/config.py (extend)
  - Config: APP_NAME, APP_DESCRIPTION, BOT_NAME, LOGO_URL, PRIMARY_COLOR
  - Depends on: P0.1

- [ ] Add feature flag configuration (1 file, ~30 LOC)
  - Tests: tests/unit/test_feature_flags.py
  - Files: core/config.py (extend)
  - Config: ENABLE_VARIETY_PROCESSOR, ENABLE_MESSENGER, ENABLE_ANALYTICS
  - Depends on: P0.1

- [ ] Update API app to use config (2 files, ~30 LOC)
  - Tests: tests/integration/test_app_config.py
  - Files: api/main.py, core/health.py
  - PALAI ref: `backend/api/main.py:app = FastAPI(title="PALAI"...)` â†’ use config
  - Depends on: P0.1

- [ ] Create branding API endpoint (1 file, ~40 LOC)
  - Tests: tests/integration/test_branding_api.py
  - Files: api/routers/branding.py (new)
  - Returns: Current instance branding from config
  - Depends on: P0.2

- [ ] Update .env.example with all config options (1 file, ~50 lines)
  - Tests: (manual review)
  - Files: .env.example
  - PALAI ref: `/.env.example` - add new config options
  - Depends on: P0.1, P0.2, P0.3

- [ ] Create instance setup documentation (1 file, ~100 lines)
  - Tests: (manual review)
  - Files: docs/instance-configuration.md
  - Content: How to configure a new client instance
  - Depends on: P0.6

---

## 3. Success Criteria

- [ ] All client-specific values in environment variables (not hardcoded)
- [ ] APP_NAME configurable (used in API docs, health check)
- [ ] BOT_NAME configurable (used in chat responses)
- [ ] LOGO_URL and PRIMARY_COLOR configurable
- [ ] Feature flags control which processors are enabled
- [ ] `/branding` endpoint returns current instance config
- [ ] .env.example documents all configuration options
- [ ] New instance can be configured without code changes
- [ ] Zero tenant_id columns or multi-tenant code
