# P11: Improvement Plan for P5.md

## What's Weak / Missing

- **No demo reset automation**: Manual `seed reset` required. Demo gets polluted over time. No scheduled cleanup.
- **Missing access control**: Demo is public? Password-protected? API key? Not specified.
- **No environment isolation**: Demo uses same codebase. Could accidentally point to production DB.
- **Missing QA import guide**: Client setup checklist mentions QA import but no format specification.
- **No troubleshooting section**: Docs assume happy path. Common issues not addressed.
- **No post-deployment verification**: Checklist ends at "go-live". No smoke test, no health check validation.
- **Documentation versioning undefined**: Docs change over time. How to track which version matches which release?
- **Screenshots may go stale**: No process to update screenshots when UI changes.
- **Missing operational runbook**: Day-2 operations not covered (backups, logs, scaling).

---

## Why This Matters

Demo and documentation are the first impressions for sales and new developers. Weak implementation means:
- Polluted demo embarrasses sales team
- New developers blocked by missing troubleshooting
- Clients fail to import QA pairs correctly
- Production incidents due to missing operational docs
- Stale screenshots confuse users

---

## Proposed Improvements

### Add new task: P5.0 - Demo Auto-Reset

- [ ] Create scheduled job to reset demo data (2 files, ~60 LOC)
  - Tests: tests/integration/test_demo_reset_job.py
  - Files: scripts/reset_demo.py, cron/demo-reset.cron
  - Schedule: Daily at 3 AM UTC
  - Clears: conversations, observability_events (keeps QA pairs, prompts)
  - Sends: notification to Slack/email on completion
  - Depends on: P5.4

### Add new task: P5.0a - Demo Access Control

- [ ] Add basic auth to demo environment (2 files, ~40 LOC)
  - Tests: tests/integration/test_demo_auth.py
  - Files: core/middleware.py (extend), .env.demo
  - Config: DEMO_USERNAME, DEMO_PASSWORD
  - Applied to: all routes in demo environment
  - Public: /health, /branding only
  - Depends on: P5.1

### Add new task: P5.1a - Environment Safety Check

- [ ] Add boot-time environment validation (1 file, ~30 LOC)
  - Tests: tests/unit/test_env_safety.py
  - Files: core/config.py (extend)
  - Check: ENVIRONMENT=demo, DATABASE_URL != production pattern
  - Fail: if demo env points to production DB
  - Depends on: P5.1

### Add new task: P5.6a - QA Import Format Guide

- [ ] Create QA import format documentation (1 file, ~150 lines)
  - Tests: (manual review)
  - Files: docs/qa-import-guide.md
  - Content: CSV format, JSON format, text format examples
  - Include: sample files, common errors, validation rules
  - Depends on: P5.6

### Add new task: P5.6b - Troubleshooting Guide

- [ ] Create troubleshooting documentation (1 file, ~200 lines)
  - Tests: (manual review)
  - Files: docs/troubleshooting.md
  - Content: Common errors, log locations, debug endpoints
  - Sections: Chat not responding, Embeddings not generating, Facebook webhook failing
  - Depends on: P5.5

### Add new task: P5.6c - Post-Deployment Verification

- [ ] Create deployment verification checklist (1 file, ~100 lines)
  - Tests: (manual review)
  - Files: docs/deployment-verification.md
  - Content: Smoke tests to run after deploy
  - Checks: /health, /branding, chat endpoint, admin login, FB webhook verify
  - Script: scripts/verify_deployment.sh
  - Depends on: P5.5

### Add new task: P5.9 - Operational Runbook

- [ ] Create day-2 operations documentation (1 file, ~250 lines)
  - Tests: (manual review)
  - Files: docs/operations-runbook.md
  - Content: Backup procedures, log access, scaling, monitoring alerts
  - Sections: Database backups, Redis persistence, Docker container management
  - Depends on: P5.5

### Add new task: P5.7a - Screenshot Update Process

- [ ] Document screenshot maintenance process (1 file, ~50 lines)
  - Tests: (manual review)
  - Files: docs/CONTRIBUTING.md (extend)
  - Content: When to update screenshots, naming convention, resolution
  - Script: scripts/capture_screenshots.sh (using Playwright)
  - Depends on: P5.7

### Add new task: P5.8a - Documentation Versioning

- [ ] Add version tracking to documentation (2 files, ~30 lines)
  - Tests: (manual review)
  - Files: docs/README.md, docs/CHANGELOG.md
  - Content: Version number matches release, changelog for doc changes
  - Tag: docs with release version in git
  - Depends on: P5.8

### Add to Success Criteria

- [ ] Demo resets automatically daily (verified via logs)
- [ ] Demo requires authentication
- [ ] Demo cannot connect to production database
- [ ] QA import guide includes working examples
- [ ] Troubleshooting guide covers top 5 common issues
- [ ] Deployment verification script exits 0 on healthy deploy
- [ ] Runbook covers backup and restore procedures
- [ ] Screenshot update script automated
- [ ] Documentation versioned with releases

---

## Impact on Roadmap

- **Ongoing operations**: Runbook prevents production incidents
- **Sales**: Demo stays clean for demos
- **Client onboarding**: QA import guide reduces support burden
- **Development**: Screenshot script reduces manual work

Consider P5 as a milestone gate. All P6-P11 improvements should be completed before declaring Helix "release ready".
