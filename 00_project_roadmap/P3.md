# P3: Admin Dashboard Improvements

## Source Reference

**PALAI Path**: `/mnt/d/codes/palai/`

Key files to reference (patterns):
- `frontend/src/pages/Dev.tsx` - Dashboard layout pattern
- `frontend/src/pages/QualityMetrics.tsx` - Metrics/analytics pattern
- `frontend/src/components/TrendChart.tsx` - Chart component
- `backend/api/routers/costs.py` - Cost API pattern
- `backend/api/routers/observability.py` - Analytics API pattern

Improvements to existing pages:
- `frontend/src/pages/Dashboard.tsx` - Add summary widgets
- `frontend/src/pages/Settings.tsx` - Add branding configuration

---

## 1. Objective

- **What**: Improve admin dashboard with summary analytics, cost tracking widgets, and settings page.
- **Why**: Admins need quick visibility into chatbot performance and costs; settings page for instance configuration.
- **Scope**:
  - **Included**: Dashboard home widgets, QA statistics, cost summary, settings page
  - **Excluded**: Billing integration, user management, advanced analytics export

---

## 2. Implementation Tasks

- [ ] Create analytics summary API endpoint (2 files, ~100 LOC)
  - Tests: tests/integration/test_analytics_api.py
  - Files: api/routers/analytics.py (new), services/analytics_service.py (new)
  - PALAI ref: Pattern from `backend/api/routers/observability.py`
  - Depends on: P0

- [ ] Create Dashboard home page with widgets (2 files, ~150 LOC)
  - Tests: tests/pages/Dashboard.test.tsx
  - Files: src/pages/Dashboard.tsx, src/services/analytics-api.ts
  - PALAI ref: Pattern from `frontend/src/pages/Dev.tsx`
  - Depends on: P3.1

- [ ] Create StatsCard component (1 file, ~50 LOC)
  - Tests: tests/components/StatsCard.test.tsx
  - Files: src/components/dashboard/StatsCard.tsx
  - Depends on: P3.2

- [ ] Add QA statistics widget (2 files, ~80 LOC)
  - Tests: tests/components/QAStatsWidget.test.tsx
  - Files: src/components/dashboard/QAStatsWidget.tsx, src/components/dashboard/QAPieChart.tsx
  - PALAI ref: Pattern from `frontend/src/pages/QualityMetrics.tsx`
  - Depends on: P3.3

- [ ] Add cost tracking widget (2 files, ~80 LOC)
  - Tests: tests/components/CostWidget.test.tsx
  - Files: src/components/dashboard/CostWidget.tsx, src/components/dashboard/CostChart.tsx
  - PALAI ref: Pattern from `frontend/src/components/TrendChart.tsx`
  - Depends on: P3.3

- [ ] Create settings page (2 files, ~100 LOC)
  - Tests: tests/pages/Settings.test.tsx
  - Files: src/pages/Settings.tsx, src/components/settings/SettingsForm.tsx
  - PALAI ref: Pattern from `frontend/src/pages/DevSettings.tsx`
  - Depends on: P0

- [ ] Add branding preview section (1 file, ~60 LOC)
  - Tests: tests/components/BrandingPreview.test.tsx
  - Files: src/components/settings/BrandingPreview.tsx
  - Shows current branding config from environment
  - Depends on: P3.6

---

## 3. Success Criteria

- [ ] Dashboard accessible at /dashboard (default landing page)
- [ ] Shows total QA pairs count (active/draft/pending)
- [ ] Shows conversation count (today/this week/this month)
- [ ] Shows cost summary (current month, projected month-end)
- [ ] Cost widget shows breakdown by provider (OpenAI vs Anthropic)
- [ ] Settings page shows current instance configuration (read-only)
- [ ] Branding preview shows logo and colors from config
- [ ] All widgets have loading and error states
- [ ] All components have passing unit tests
